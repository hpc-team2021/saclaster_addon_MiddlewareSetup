{
    "CentOS 7.9 (2009) 64bit":
    {
        "command":
        {
            "Head":
            {
                "slurmuser":
                [
                    "adduser mpiuser",
                    "passwd mpiuser"
                ]
            },
            "Compute":
            {
                "rep":
                [
                    "yum -y install"
                ],
                "slurmuser":
                [
                    "adduser mpiuser",
                    "passwd mpiuser"
                ]
            }
        }
    },

    "CentOS Stream 8 (20201203) 64bit":
    {
        "Head":
        {
            "munge":
            {
                "mungeuser":
                [
                    "export MUNGEUSER=1005",
                    "groupadd -g $MUNGEUSER munge",
                    "useradd -m -d /var/lib/munge -u $MUNGEUSER -g munge  -s /sbin/nologin munge"
                ],
                "install":
                [
                    "yum install -y munge munge-libs",
                    "yum install -y rng-tools"
                ],
                "munge-key":
                [
                    "rngd -r /dev/urandom",
                    "/usr/sbin/create-munge-key -r",
                    "dd if=/dev/urandom bs=1 count=1024 > /etc/munge/munge.key",
                    "chown munge: /etc/munge/munge.key",
                    "chmod 400 /etc/munge/munge.key",
                    "scp /etc/munge/munge.key"
                ],
                "daemon":
                [
                    "systemctl enable munge",
                    "systemctl start munge"
                ]
            },
            "slurm":
            {
                "slurmuser":
                [
                    "export SLURMUSER=1006",
                    "groupadd -g $SLURMUSER slurm",
                    "useradd  -m -d /var/lib/slurm -u $SLURMUSER -g slurm  -s /bin/bash slurm"
                ]
            }
        },
        "Compute":
        {
            "munge":
            {
                "mungeuser":
                [
                    "export MUNGEUSER=1005",
                    "groupadd -g $MUNGEUSER munge",
                    "useradd  -m -d /var/lib/munge -u $MUNGEUSER -g munge  -s /sbin/nologin munge"
                ],
                "install":
                [
                    "yum install -y munge munge-libs"
                ],
                "munge-key":
                [
                    "chown -R munge: /etc/munge/ /var/log/munge/",
                    "chmod 0700 /etc/munge/ /var/log/munge/"
                ],
                "daemon":
                [
                    "systemctl enable munge",
                    "systemctl start munge"
                ]
            }
        }
    }
}